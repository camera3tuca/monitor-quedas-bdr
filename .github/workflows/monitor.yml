name: Monitor Horário (10h-17h)

on:
  schedule:
    # Horário UTC (Brasil +3h)
    # Roda aos 30 minutos de cada hora
    # 13:30 UTC = 10:30 Brasil
    # ...
    # 20:30 UTC = 17:30 Brasil
    - cron: '30 13-20 * * 1-5'
  
  workflow_dispatch:

jobs:
  executar_robo:
    runs-on: ubuntu-latest
    env:
      WHATSAPP_PHONE: ${{ secrets.WHATSAPP_PHONE }}
      WHATSAPP_APIKEY: ${{ secrets.WHATSAPP_APIKEY }}
      BRAPI_API_TOKEN: ${{ secrets.BRAPI_API_TOKEN }}
      GITHUB_ACTIONS: "true"

    steps:
      - name: Baixar código
        uses: actions/checkout@v3

      - name: Instalar Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: Instalar dependências
        run: pip install -r requirements.txt

      - name: Executar Monitor
        run: python app.py
